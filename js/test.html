<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Title of the document</title>
		<script src="lib/js-unzip.min.js"></script>
		<script src="unzip.js"></script>
		<script>
			var ChunkReader = function(file){
				var self = this;
				self.update = function(){
					console.log(self.start);
					console.log(self.end);
					console.log(self.file);
				}
				self.readNextLine = function(){
					if(self.start<self.file.size)
						self.reader.readAsText(self.file.slice(self.start,self.end));	
					else{
						console.log("EOF")
						console.log("time: "+(new Date().getTime()-self.startTime.getTime()));
					}
					self.start+=self.chunkSize;
					self.end+=self.chunkSize;
					self.end= Math.min(self.file.size,self.end);
				}
				self.startTime = new Date();
				self.chunkSize = 1024;
				self.chunkSize = 2048;
				self.chunkSize = 4096;
				self.start = 0;
				self.end = self.chunkSize;
				self.reader = new FileReader();
				self.reader.onload = function(e){
					//console.log(self.reader.result);
					self.readNextLine();
				}
				self.file = file;
			}
			function fileSelected(file){
				new ChunkReader(file).readNextLine()
			}
		</script>
	</head>
	<body>
		<input type="file" id="zipfile" onchange="fileSelected(this.files[0])">
		<button onClick="parseZip()">Hallo</button>
	</body>
</html>

